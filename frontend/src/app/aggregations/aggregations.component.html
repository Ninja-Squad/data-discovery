<div *ngIf="aggregations?.length">
  <div *ngFor="let aggregation of aggregations">
    <!-- we display checkboxes if there are only a few options -->
    <ng-template #smallAggregation>
      <rare-small-aggregation [aggregation]="aggregation"
                              [selectedKeys]="selectedKeysForAggregation(aggregation.name)"
                              (aggregationChange)="onAggregationChange($event)"></rare-small-aggregation>
    </ng-template>
    <!-- we display an input with autocomplete if there are usually many options, like for the taxon,
    and more than 10 options for this search -->
    <rare-large-aggregation
      *ngIf="aggregation.type === 'LARGE' && aggregation.buckets.length >= 10; else smallAggregation"
      [aggregation]="aggregation"
      [selectedKeys]="selectedKeysForAggregation(aggregation.name)"
      (aggregationChange)="onAggregationChange($event)"></rare-large-aggregation>
  </div>
</div>
