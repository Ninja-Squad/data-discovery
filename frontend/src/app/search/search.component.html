<h1 class="sr-only">Résultats de la recherche</h1>

<div class="mt-4">
  <h2 class="sr-only">Nouvelle recherche</h2>
  <form [formGroup]="searchForm" (ngSubmit)="newSearch()">
    <label class="sr-only" for="query">Rechercher</label>
    <div class="input-group">
      <input id="query"
             class="form-control"
             placeholder="Exemples : pisum sativum, rosa"
             formControlName="search"
             [ngbTypeahead]="suggesterTypeahead"
             [focusFirst]="false">
      <div class="input-group-append">
        <button class="btn btn-outline-secondary">Recherche</button>
      </div>
    </div>
  </form>
</div>
<div class="mt-3 mb-3 d-md-none">
  <button class="btn btn-outline-secondary" (click)="toggleFilters()">
    <i class="fa fa-sliders" aria-hidden="true"></i>&ngsp;Filtres&ngsp;
    <i class="fa" [class.fa-caret-up]="filters === 'show'" [class.fa-caret-down]="filters === 'hide'" aria-hidden="true"></i>
  </button>
</div>
<div class="row mt-sm-2 mt-md-5">
  <div class="col-lg-3 col-md-4 col-xs-12 filters" [@showHide]="filters">
    <h2 class="sr-only">Filtres</h2>
    <rare-aggregations *ngIf="aggregations"
                       [aggregations]="aggregations"
                       [selectedCriteria]="aggregationCriteria"
                       (aggregationsChange)="updateSearchWithAggregation($event)">
    </rare-aggregations>
  </div>
  <div class="col-lg-9 col-md-8 col-xs-12">
    <h2 class="sr-only">Résultats</h2>
    <div *ngIf="results">
      <rare-genetic-resources [geneticResources]="results"></rare-genetic-resources>
    </div>

    <div class="d-flex justify-content-center mt-5" *ngIf="results && results.totalPages > 1">
      <h2 class="sr-only">Pagination</h2>
      <!-- we add 1 to the page because ngb-pagination is 1 based -->
      <ngb-pagination *ngIf="results" [page]="results.number + 1" (pageChange)="navigateToPage($event)"
                      [collectionSize]="collectionSize()"
                      [pageSize]="results.size"
                      [maxSize]="5"
                      [boundaryLinks]="true"
                      [ellipses]="false"
                      size="sm">
      </ngb-pagination>
    </div>
  </div>
</div>
